  오디오 구조 설명 (FMOD + Manifest 기반)

  1. 전체 구조

  - Engine 쪽에서 오디오 관리
  - AudioManager가 AudioSystem을 초기화하고 AudioManifest.csv를 읽어 클립을 생성
  - EngineApp에서 매 프레임 업데이트(리스너/소스 업데이트 포함)

  2. 파일/폴더

  - 매니페스트/에셋
      - D:\JesaSang\TigerEngine\Project\Assets\Audio\AudioManifest.csv
      - D:\JesaSang\TigerEngine\Project\Assets\Audio\AMB\
      - D:\JesaSang\TigerEngine\Project\Assets\Audio\BGM\
      - D:\JesaSang\TigerEngine\Project\Assets\Audio\SFX\
  - 오디오 모듈
      - D:\JesaSang\TigerEngine\Project\Externals\AudioModule_FMOD\include\*
      - D:\JesaSang\TigerEngine\Project\Externals\AudioModule_FMOD\src\*
      - D:\JesaSang\TigerEngine\Project\Externals\AudioModule_FMOD\fmod\bin (dll)
      - D:\JesaSang\TigerEngine\Project\Externals\AudioModule_FMOD\fmod\lib\x64 (lib)

  3. 핵심 코드 위치

  - 오디오 매니저
      - D:\JesaSang\TigerEngine\Project\Engine\Manager\AudioManager.h
      - D:\JesaSang\TigerEngine\Project\Engine\Manager\AudioManager.cpp
  - 엔진 라이프사이클 연결
      - D:\JesaSang\TigerEngine\Project\WorkSpace\EngineApp.cpp

  4. 초기화 / 루프 흐름

  - 초기화 (EngineApp::OnInitialize)
      - AudioManager::Instance().Initialize()
      - AudioManager가 AudioManifest.csv를 읽어 엔트리 등록
  - 매 프레임 업데이트 (EngineApp::OnUpdate)
      - AudioManager::Instance().Update()
      - 테스트용 리스너/소스 업데이트 + 재생

  5. 매니페스트 포맷
     헤더:

  ID,Path,Group,Mode,DefaultVolume,Loop

  예시:

  SFX_TestLoop,..\\Assets\\Audio\\SFX\\sfx_test_loop.wav,SFX,3D,0.6,1
  BGM_Main,..\\Assets\\Audio\\BGM\\bgm_main.mp3,BGM,2D,0.4,1

  - Mode는 2D 또는 3D
  - Loop는 1/0
  - Path는 실행 폴더 기준 상대경로 (현재는 ..\\Assets\\Audio\\...)

  6. 재생 방식 (ID 기반)

  - AudioManager::GetOrCreateClip("SFX_TestLoop")로 클립 획득
  - AudioSourceComponent에 SetClip / SetLoop / SetVolume / Play
  - 리스너는 카메라(Transform) 위치/방향을 바인딩

  7. 테스트용 현재 동작

  - SFX_TestLoop를 자동 재생
  - 리스너 = 현재 카메라
  - 소스 = 카메라 전방 5m 위치
    (정중앙/고정 테스트로 바꾸려면 소스 위치를 리스너와 동일하게 설정)

  8. FMOD 라이브러리 관련

  - fmod*.lib / fmod*.dll은 Git에 올라가지 않음
  - 다른 개발자도 동일 경로에 FMOD SDK 준비 필요

    오디오 컴포넌트화 설계(안)

  목표

  - 엔진에 오디오 컴포넌트를 정식 등록하여 씬 객체에 부착 가능하게 한다.
  - 매니페스트 기반으로 ID만으로 사운드를 재생한다.
  - Base는 수정하지 않는다.

  1. 구성 요소

  - AudioManager (Engine/Manager)
      - 역할: FMOD 초기화/업데이트/해제, Manifest 파싱, Clip 캐싱
      - API: Initialize(), Update(), Shutdown(), GetOrCreateClip(id), GetEntry(id)
  - AudioListenerComponent (Externals/AudioModule_FMOD)
      - 역할: 리스너(카메라 등) 위치/방향 업데이트
  - AudioSourceComponent (Externals/AudioModule_FMOD)
      - 역할: 소스(오브젝트) 위치/클립/재생 제어

  2. 컴포넌트 등록 위치

  - EngineApp::RegisterAllComponents()
      - ComponentFactory::Instance().Register<AudioListenerComponent>("AudioListener");
      - ComponentFactory::Instance().Register<AudioSourceComponent>("AudioSource");
  - 단, AudioListener/AudioSourceComponent는 현재 Externals에 있으므로 Engine 등록 시 include 경로가 필요

  3. 씬 데이터(Serialize/Deserialize)

  - AudioSourceComponent에 아래 필드가 필요(추가 구현 필요)
      - string clipId (Manifest의 ID)
      - float volume
      - bool loop
      - string group
      - bool is3D
  - 씬 로딩 시:
      - AudioManager에서 ID로 clip 로딩
      - AudioSourceComponent에 clip 연결
  - 참고: 현재 AudioSourceComponent는 Serialize/Deserialize 미구현이므로 확장 필요

  4. 런타임 흐름

  - EngineApp::OnInitialize
      - AudioManager::Initialize()
  - EngineApp::OnUpdate (매 프레임)
      - AudioManager::Update()
      - 모든 AudioListenerComponent Update()
      - 모든 AudioSourceComponent Update3D()

  5. 리스너/소스 바인딩 규칙

  - 리스너: 카메라 오브젝트의 Transform + 카메라 Forward/Up
  - 소스: 사운드 오브젝트의 Transform 위치/속도
  - 기본 정책:
      - 리스너는 현재 카메라 1개만 사용
      - 소스는 각 오브젝트에 1개 이상 가능

  6. 매니페스트 연동 규칙

  - AudioManifest.csv
      - ID,Path,Group,Mode,DefaultVolume,Loop
  - Mode = 2D/3D
  - Path는 실행 폴더 기준 상대경로
  - 로딩 실패 시 로그 출력 후 무시(엔진 크래시 방지)

  7. 테스트 시나리오

  - 오브젝트 하나에 AudioSourceComponent 부착
  - 카메라 오브젝트에 AudioListenerComponent 부착
  - Manifest의 SFX_TestLoop를 재생하여 방향/거리 감도 확인

  8. 주의사항

  - FMOD DLL/lib는 Git에 포함되지 않음 (각 개발자가 SDK 준비)
  - 오디오 파일은 모노 권장(3D 공간화 안정적)
